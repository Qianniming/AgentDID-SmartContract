# ğŸ¤– AgentDID Smart Contract

[![License: Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Hardhat](https://img.shields.io/badge/Built%20with-Hardhat-FFDB1C.svg)](https://hardhat.org/)
[![Solidity](https://img.shields.io/badge/Solidity-%5E0.8.19-363636)](https://soliditylang.org/)

ä¸€ä¸ªåŸºäºä»¥å¤ªåŠåŒºå—é“¾çš„å»ä¸­å¿ƒåŒ–èº«ä»½ï¼ˆDIDï¼‰æ™ºèƒ½åˆçº¦ï¼Œä¸“ä¸º AI ä»£ç†è®¾è®¡ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

AgentDID æ˜¯ä¸€ä¸ªåˆ›æ–°çš„æ™ºèƒ½åˆçº¦ç³»ç»Ÿï¼Œä¸º AI ä»£ç†æä¾›å»ä¸­å¿ƒåŒ–èº«ä»½ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åŒºå—é“¾æŠ€æœ¯ç¡®ä¿èº«ä»½çš„ä¸å¯ç¯¡æ”¹æ€§å’Œé€æ˜æ€§ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ†” **AI ä»£ç†èº«ä»½ç®¡ç†** - åˆ›å»ºå’Œç®¡ç† AI ä»£ç†çš„å”¯ä¸€èº«ä»½æ ‡è¯†
- ğŸ“„ **DID æ–‡æ¡£å­˜å‚¨** - å®‰å…¨å­˜å‚¨å’Œæ›´æ–°ä»£ç†çš„èº«ä»½æ–‡æ¡£
- ğŸ” **æˆæƒå¯†é’¥ç®¡ç†** - çµæ´»çš„å¯†é’¥æˆæƒå’Œæ’¤é”€æœºåˆ¶
- ğŸ“¦ **æ‰¹é‡æ“ä½œæ”¯æŒ** - é«˜æ•ˆçš„æ‰¹é‡èº«ä»½æ“ä½œ
- â¸ï¸ **å¯æš‚åœåŠŸèƒ½** - ç´§æ€¥æƒ…å†µä¸‹çš„å®‰å…¨æš‚åœæœºåˆ¶
- ğŸ”’ **è®¿é—®æ§åˆ¶** - åŸºäºè§’è‰²çš„æƒé™ç®¡ç†

## ğŸŒ å·²éƒ¨ç½²åˆçº¦

### Sepolia æµ‹è¯•ç½‘
- **åˆçº¦åœ°å€**: [`0x8E2e0E6c73157CA291fA978102b4db80381C916C`](https://sepolia.etherscan.io/address/0x8E2e0E6c73157CA291fA978102b4db80381C916C)
- **ç½‘ç»œ**: Sepolia Testnet
- **çŠ¶æ€**: âœ… å·²éªŒè¯
- **éƒ¨ç½²æ—¶é—´**: 2025å¹´10æœˆ30æ—¥
- **å¼€å‘è€…**: Qianniming

### åˆçº¦ä¿¡æ¯
- **Agent Name**: AI Assistant Agent
- **Function Type**: General Purpose AI
- **Version**: 1.0.0
- **Owner**: éƒ¨ç½²è´¦æˆ·åœ°å€

## é¡¹ç›®æ¦‚è¿°

- **æ ¸å¿ƒç›®æ ‡**ï¼šä¸ºAI Agentæä¾›å»ä¸­å¿ƒåŒ–çš„èº«ä»½ç®¡ç†å’Œå®‰å…¨çš„æˆæƒæœºåˆ¶
- **æŠ€æœ¯æ ‡å‡†**ï¼šéµå¾ªDIDæ ‡å‡†(did:ethræ ¼å¼)ï¼Œé‡‡ç”¨Keccak256å“ˆå¸Œç®—æ³•ç¡®ä¿å®‰å…¨æ€§
- **éƒ¨ç½²ç¯å¢ƒ**ï¼šä»¥å¤ªåŠä¸»ç½‘/æµ‹è¯•ç½‘ï¼Œä½¿ç”¨Solidity 0.8.19+ç‰ˆæœ¬å¼€å‘

## åŠŸèƒ½æ¨¡å—

### äº”å¤§æ ¸å¿ƒæ¨¡å—

1. **æ¨¡å—ä¸€ï¼šåŸºç¡€èº«ä»½ä¸DIDæ–‡æ¡£ç®¡ç†**
   - åˆçº¦éƒ¨ç½²åˆå§‹åŒ–
   - DIDæ–‡æ¡£å­—æ®µæ›´æ–°
   - å…¬å¼€æŸ¥è¯¢åŠŸèƒ½

2. **æ¨¡å—äºŒï¼šæˆæƒå¯†é’¥å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**
   - å¯†é’¥ç”Ÿæˆä¸éªŒè¯
   - å¯†é’¥å¤±æ•ˆå¤„ç†
   - è‡ªåŠ¨è¿‡æœŸæœºåˆ¶

3. **æ¨¡å—ä¸‰ï¼šAgentå¯†ç ç®¡ç†**
   - å¯†ç ä¿®æ”¹ï¼ˆéœ€æ—§å¯†ç ï¼‰
   - å¯†ç é‡ç½®ï¼ˆå¿˜è®°æ—§å¯†ç ï¼‰
   - å“ˆå¸ŒéªŒè¯æœºåˆ¶

4. **æ¨¡å—å››ï¼šæƒé™ä¸åº”æ€¥å¤„ç†**
   - æ‰€æœ‰æƒè½¬ç§»
   - ç´§æ€¥æš‚åœ/æ¢å¤
   - å‚æ•°é…ç½®ç®¡ç†

5. **æ¨¡å—äº”ï¼šå¼‚å¸¸ä¸è¾¹ç•Œå¤„ç†**
   - æƒé™æ‹¦æˆª
   - é˜²æš´åŠ›ç ´è§£
   - å¤±æ•ˆå¯†é’¥å¤„ç†

## é¡¹ç›®ç»“æ„

```
SmartContract/
â”œâ”€â”€ contracts/
â”‚   â””â”€â”€ AgentDID.sol          # ä¸»æ™ºèƒ½åˆçº¦
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deploy.js             # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ test/
â”‚   â””â”€â”€ AgentDID.test.js      # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ hardhat.config.js         # Hardhaté…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm æˆ– yarn
- Git

### å®‰è£…ä¾èµ–

```bash
npm install
```

### ç¼–è¯‘åˆçº¦

```bash
npm run compile
```

### è¿è¡Œæµ‹è¯•

```bash
npm test
```

### éƒ¨ç½²åˆçº¦

```bash
# éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
npm run deploy:localhost

# éƒ¨ç½²åˆ°å…¶ä»–ç½‘ç»œ
npm run deploy
```

### å¯åŠ¨æœ¬åœ°èŠ‚ç‚¹

```bash
npm run node
```

## æµ‹è¯•è¦†ç›–

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–æ‰€æœ‰16ä¸ªä¸šåŠ¡åœºæ™¯ï¼š

### æ¨¡å—ä¸€ï¼šåŸºç¡€èº«ä»½ä¸DIDæ–‡æ¡£ç®¡ç†
- âœ… åœºæ™¯1ï¼šåˆçº¦éƒ¨ç½²åˆå§‹åŒ–
- âœ… åœºæ™¯2ï¼šOwneræ›´æ–°DIDæ–‡æ¡£å•ä¸ªå­—æ®µ
- âœ… åœºæ™¯3ï¼šç¬¬ä¸‰æ–¹æŸ¥è¯¢DIDæ–‡æ¡£

### æ¨¡å—äºŒï¼šæˆæƒå¯†é’¥å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… åœºæ™¯4ï¼šAgentç”Ÿæˆæˆæƒå¯†é’¥
- âœ… åœºæ™¯5ï¼šç¬¬ä¸‰æ–¹éªŒè¯æœ‰æ•ˆæˆæƒå¯†é’¥
- âœ… åœºæ™¯6ï¼šAgentä¸»åŠ¨å¤±æ•ˆæˆæƒå¯†é’¥
- âœ… åœºæ™¯7ï¼šæˆæƒå¯†é’¥è‡ªåŠ¨è¿‡æœŸ

### æ¨¡å—ä¸‰ï¼šAgentå¯†ç ç®¡ç†
- âœ… åœºæ™¯9ï¼šOwnerä¿®æ”¹Agentå¯†ç ï¼ˆæä¾›æ—§å¯†ç ï¼‰
- âœ… åœºæ™¯10ï¼šOwneré‡ç½®Agentå¯†ç ï¼ˆå¿˜è®°æ—§å¯†ç ï¼‰

### æ¨¡å—å››ï¼šæƒé™ä¸åº”æ€¥å¤„ç†
- âœ… åœºæ™¯11ï¼šOwnerå‘èµ·æ‰€æœ‰æƒè½¬ç§»
- âœ… åœºæ™¯12ï¼šæ–°Ownerç¡®è®¤æ‰€æœ‰æƒè½¬ç§»
- âœ… åœºæ™¯13ï¼šOwnerç´§æ€¥æš‚åœå’Œæ¢å¤åˆçº¦

### æ¨¡å—äº”ï¼šå¼‚å¸¸ä¸è¾¹ç•Œå¤„ç†
- âœ… åœºæ™¯14ï¼šéOwnerå°è¯•ä¿®æ”¹æƒé™/æ•°æ®
- âœ… åœºæ™¯15ï¼šAgentå¤šæ¬¡è¾“å…¥é”™è¯¯å¯†ç 
- âœ… åœºæ™¯16ï¼šç¬¬ä¸‰æ–¹éªŒè¯æ— æ•ˆ/è¿‡æœŸå¯†é’¥

## å®‰å…¨ç‰¹æ€§

- **å¯†ç å®‰å…¨**ï¼šAgentåŸºç¡€å¯†ç å’Œæˆæƒå¯†é’¥å‡é‡‡ç”¨Keccak256å“ˆå¸Œå­˜å‚¨
- **å¯†é’¥æ¦‚å¿µåˆ†ç¦»**ï¼šAgentåŸºç¡€å¯†ç ç”¨äºèº«ä»½è®¤è¯ï¼Œæˆæƒå¯†é’¥ç”¨äºä¸´æ—¶éªŒè¯
- **æˆæƒå¯†é’¥å”¯ä¸€æ€§**ï¼šåŒä¸€æ—¶é—´ä»…å…è®¸ä¸€ä¸ªæœ‰æ•ˆæˆæƒå¯†é’¥
- **é˜²é‡æ”¾æ”»å‡»**ï¼šæˆæƒå¯†é’¥éªŒè¯åç«‹å³æ ‡è®°ä¸ºå·²ä½¿ç”¨
- **æƒé™éš”ç¦»**ï¼šä¸¥æ ¼çš„ä¿®é¥°ç¬¦æ§åˆ¶ï¼Œç¡®ä¿åªæœ‰æˆæƒè§’è‰²å¯æ‰§è¡Œç›¸åº”æ“ä½œ
- **åº”æ€¥æœºåˆ¶**ï¼šç´§æ€¥æš‚åœåŠŸèƒ½ï¼Œå¯å¿«é€Ÿåœæ­¢å…³é”®æ“ä½œ
- **é˜²æš´åŠ›ç ´è§£**ï¼šå¯†ç é”™è¯¯5æ¬¡åé”å®š1å°æ—¶

## Gasä¼˜åŒ–

- **å­˜å‚¨ä¼˜åŒ–**ï¼šä½¿ç”¨mappingå­˜å‚¨DIDå­—æ®µï¼Œæ”¯æŒéƒ¨åˆ†æ›´æ–°
- **æ‰¹é‡é™åˆ¶**ï¼šè®¾ç½®maxBatchSizeå‚æ•°ï¼Œé˜²æ­¢å•æ¬¡æ“ä½œgasæ¶ˆè€—è¿‡é«˜
- **äº‹ä»¶è®°å½•**ï¼šå…³é”®æ“ä½œè§¦å‘äº‹ä»¶ï¼Œä¾¿äºé“¾ä¸‹ç›‘å¬å’ŒçŠ¶æ€åŒæ­¥
- **è‡ªå®šä¹‰é”™è¯¯**ï¼šä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯æ›¿ä»£requireè¯­å¥ï¼ŒèŠ‚çœgas

## ä¸»è¦æ¥å£

### DIDæ–‡æ¡£ç®¡ç†
- `updateDIDDocField(string fieldName, string newValue)` - æ›´æ–°å•ä¸ªå­—æ®µ
- `updateDIDDocument(string[] fields, string[] values)` - æ‰¹é‡æ›´æ–°
- `getDIDDocument()` - æŸ¥è¯¢å®Œæ•´DIDæ–‡æ¡£
- `getDIDDocField(string fieldName)` - æŸ¥è¯¢å•ä¸ªå­—æ®µ

### æˆæƒå¯†é’¥ç®¡ç†
- `requestAuthKey(string agentPassword)` - ç”Ÿæˆæˆæƒå¯†é’¥
- `verifyAgentAuth(string authKey)` - éªŒè¯æˆæƒå¯†é’¥
- `invalidateAuthKey(string agentPassword)` - å¤±æ•ˆæˆæƒå¯†é’¥

### å¯†ç ç®¡ç†
- `updateAgentPassword(string oldPassword, string newPassword)` - ä¿®æ”¹å¯†ç 
- `resetAgentPassword(string newPassword)` - é‡ç½®å¯†ç 

### æƒé™æ§åˆ¶
- `transferOwnership(address newOwner)` - å‘èµ·æ‰€æœ‰æƒè½¬ç§»
- `acceptOwnership()` - ç¡®è®¤æ‰€æœ‰æƒè½¬ç§»
- `emergencyPause()` - ç´§æ€¥æš‚åœ
- `emergencyUnpause()` - æ¢å¤è¿è¡Œ

## è®¸å¯è¯

Apache License 2.0

Copyright 2025 Qianniming

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡GitHub Issuesè”ç³»æˆ‘ä»¬ã€‚